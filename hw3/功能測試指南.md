# 功能測試指南

## 📅 價格日曆功能測試

### 測試步驟：

1. **開啟首頁** http://localhost:5173

2. **選擇來回票**（預設已選）
   - 出發地：台北 TPE
   - 目的地：東京 NRT
   - 出發日期：選擇任一日期（例如：今天+3天）
   - 回程日期：選擇一個日期（可選）
   - 艙等：經濟艙

3. **點擊「搜尋航班」**

4. **應該會看到：**
   - ✅ 價格日曆（顯示5個日期卡片）
   - ✅ 左側 ‹ 按鈕（往前一天）
   - ✅ 右側 › 按鈕（往後一天）
   - ✅ 中間選擇的日期是金色高亮
   - ✅ 每個日期顯示價格（如 $8.5k）

5. **測試功能：**
   - 點擊 ‹ 按鈕 → 日期往前一天
   - 點擊 › 按鈕 → 日期往後一天
   - 點擊其他日期卡片 → 切換到該日期
   - 週末的卡片有紅色背景標示

### 注意事項：
- ⚠️ **多程票不顯示價格日曆**（設計如此）
- ⚠️ **單程票會顯示價格日曆**

---

## 🎯 出發地/目的地選單測試

### 測試步驟：

1. **開啟首頁**

2. **觀察搜尋表單**
   - 出發地選單應該在**左側**
   - 交換按鈕（⇄）在**中間**
   - 目的地選單在**右側**
   - **三者應該在同一個水平線上**

3. **桌面版（寬螢幕）：**
   - 出發地/目的地選單不會太寬（最大 280px）
   - 選單置中對齊
   - 交換按鈕顯示

4. **手機版（窄螢幕）：**
   - 選單堆疊顯示（垂直排列）
   - 交換按鈕隱藏

---

## 🛒 購物車功能測試

### 測試來回票：

1. **搜尋來回票**
   - 台北 → 東京（10/15）
   - 回程日期：10/20

2. **選擇去程航班**
   - 例如：JX801（08:30）
   - 應該顯示「選擇回程航班」

3. **選擇回程航班**
   - 例如：JX802（14:00）
   - 自動跳轉到購物車

4. **檢查購物車**
   - ✅ 應該看到 **2 個航班**
   - ✅ 去程：JX801
   - ✅ 回程：JX802

### 測試多程票：

1. **選擇「多程」**

2. **填寫行程：**
   - 行程1: 台北 → 東京（10/15）
   - 行程2: 東京 → 大阪（10/17）
   - 點擊「新增行程」
   - 行程3: 大阪 → 台北（10/20）

3. **搜尋航班**

4. **選擇各程航班**
   - 選擇行程1航班
   - 自動切換到行程2
   - 選擇行程2航班
   - 自動切換到行程3
   - 選擇行程3航班
   - 自動跳轉到購物車

5. **檢查購物車**
   - ✅ 應該看到 **3 個航班**

### 除錯技巧：

1. **打開瀏覽器 Console**
   - 按 F12 或 Cmd+Option+I
   - 切換到 Console 標籤

2. **查看日誌**
   - 每次加入航班時會顯示：
     ```
     Adding flight to cart: JX801
     ```

3. **如果沒加入：**
   - 檢查 Console 有無錯誤訊息
   - 確認是否顯示了 "Adding flight to cart" 訊息
   - 檢查購物車徽章數字是否增加

---

## 🗺️ 旅行地圖測試

### 視覺檢查：

1. **前往旅行地圖頁面** `/map`

2. **應該看到：**
   - 🌊 深藍色海洋背景
   - 🗺️ 綠色的陸塊（亞洲、歐洲、美洲等）
   - ✨ 陸塊有粗邊框和陰影
   - 🚩 機場位置有旗子標記

3. **互動測試：**
   - Hover 陸塊 → 應該會發光
   - Hover 機場標記 → 旗子會放大

### 統計檢查：

- 顯示訪問過的機場總數
- 各洲的國家數統計
- 機場列表

---

## 💳 付款表單測試

### 測試不同付款方式：

1. **信用卡：**
   - ✅ 持卡人姓名
   - ✅ 卡號
   - ✅ 有效期限
   - ✅ 安全碼（CVV）
   - ✅ 帳單地址

2. **金融卡：**
   - ✅ 持卡人姓名
   - ✅ 卡號
   - ✅ 有效期限
   - ✅ 安全碼（CVV）
   - ✅ 帳單地址
   - ❌ 不應該有身分證字號

3. **ATM 轉帳：**
   - ✅ 顯示銀行資訊
   - ✅ 轉帳帳號後5碼
   - ✅ 轉帳日期
   - ✅ 注意事項

---

## 🐛 已知問題排查

### 如果價格日曆沒顯示：

**檢查清單：**
1. ✅ 是否選擇了「來回」或「單程」？
   - 多程不顯示價格日曆

2. ✅ 是否已經搜尋航班？
   - 只在搜尋後才顯示

3. ✅ 是否有選擇日期？
   - 必須要有日期才會顯示

4. ✅ Console 有無錯誤？

### 如果航班沒加入購物車：

**檢查清單：**
1. ✅ Console 是否顯示 "Adding flight to cart"？
2. ✅ 購物車徽章數字是否增加？
3. ✅ 前往購物車頁面檢查

**可能原因：**
- LocalStorage 已滿（清除瀏覽器資料）
- 瀏覽器無痕模式（改用正常模式）
- React 狀態更新延遲（重新整理頁面）

### 如果選單沒對齊：

**檢查：**
1. 瀏覽器視窗寬度 > 768px（桌面版）
2. 清除瀏覽器快取
3. 重新整理頁面（Cmd+R 或 Ctrl+R）

---

## ✅ 完整測試流程

### 流程 A：來回票 + 價格日曆

```
1. 選擇「來回」
2. 台北 → 東京，選擇日期
3. 搜尋航班
4. 看到價格日曆（5個日期）
5. 點擊 ‹ 往前一天
6. 點擊 › 往後一天
7. 點擊某個日期卡片切換
8. 選擇去程航班
9. 選擇回程航班
10. 檢查購物車：2個航班 ✓
11. 前往付款
12. 選擇信用卡，檢查欄位
13. 切換到金融卡，檢查欄位（無身分證）
14. 切換到 ATM，檢查轉帳資訊
15. 完成付款
16. 前往訂單記錄，看到新訂單
17. 前往旅行地圖，看到機場標記
```

### 流程 B：多程票

```
1. 選擇「多程」
2. 填寫2-4個行程
3. 搜尋航班
4. 逐一選擇每程航班（無價格日曆）
5. 所有程選完後檢查購物車
6. 完成付款
7. 檢查訂單記錄
8. 檢查旅行地圖
```

---

## 🎯 關鍵功能確認

- [x] 價格日曆顯示（前後2天）
- [x] 往前/往後一天按鈕
- [x] 出發地/目的地選單置中對齊
- [x] 購物車正確加入航班
- [x] 信用卡/金融卡欄位相同
- [x] 旅行地圖陸塊清楚明顯
- [x] 訂單刪除功能
- [x] 多程航班選擇

---

**測試建議：**
清除 LocalStorage 重新測試：
```javascript
// 在瀏覽器 Console 執行
localStorage.clear()
// 然後重新整理頁面
```

這樣可以確保從乾淨狀態開始測試。

