# 版本更新說明 v2.1

## 🎉 新功能

### 1. 訂單記錄管理
- ✅ **刪除訂單功能** - 可以刪除不需要的訂單
- ✅ **同步更新旅行地圖** - 刪除訂單時，旅行地圖上的記錄也會一併移除
- ✅ **確認提示** - 刪除前會彈出確認對話框

### 2. 多樣化行程選擇
- ✅ **來回票** (預設) - 選擇去程和回程航班
- ✅ **單程票** - 只選擇單程航班
- ✅ **多程票** - 最多可規劃 4 程旅行
  - 可新增/移除行程
  - 每程獨立選擇出發地、目的地、日期
  - 日期自動驗證（後面的行程日期必須晚於前面）

### 3. 多程航班選擇流程
**完整的一程一程選擇：**
1. 搜尋後顯示第一程航班
2. 選擇第一程後，自動顯示第二程
3. 依此類推，直到所有程都選完
4. 顯示已選擇的航班預覽
5. 選完所有程後，一起加入購物車並結帳

### 4. 智能付款表單
**不同付款方式對應不同欄位：**

#### 💳 信用卡
- 持卡人姓名
- 卡號 (16-19 位數)
- 有效期限 (MM/YY)
- 安全碼 (CVV)
- 帳單地址

#### 🏦 金融卡
- 持卡人姓名
- 卡號 (16 位數)
- 身分證字號
- 有效期限
- 卡片密碼

#### 🏧 ATM 轉帳
- 銀行代碼與帳號（自動顯示）
- 轉帳金額（自動計算）
- 轉帳帳號後5碼
- 轉帳日期
- 注意事項提示

## 📋 使用說明

### 訂購多程票範例

**情境：台北 → 東京 → 大阪 → 台北**

1. **選擇多程**
   - 點選「多程」選項
   
2. **填寫行程資訊**
   - 行程1: 台北 → 東京, 10/15
   - 行程2: 東京 → 大阪, 10/17
   - 點擊「新增行程」
   - 行程3: 大阪 → 台北, 10/20
   
3. **選擇航班**
   - 系統顯示「選擇航班 - 行程 1/3」
   - 選擇台北→東京的航班
   - 系統自動切換到「選擇航班 - 行程 2/3」
   - 選擇東京→大阪的航班
   - 系統自動切換到「選擇航班 - 行程 3/3」
   - 選擇大阪→台北的航班
   
4. **完成訂購**
   - 三張機票自動加入購物車
   - 前往付款頁面
   - 選擇付款方式並填寫對應資訊
   - 確認付款

### 刪除訂單

1. 前往「訂單記錄」頁面
2. 找到要刪除的訂單
3. 點擊「刪除訂單」按鈕
4. 確認刪除（會提示旅行地圖記錄也會移除）
5. 訂單刪除完成

## 🔄 功能改進

### 首頁優化
- 新增行程類型選擇器（來回/單程/多程）
- 多程模式下可動態新增/移除行程
- 顯示已選擇航班的預覽
- 每一程逐步選擇，流程更清晰

### 付款頁面優化
- 根據付款方式動態切換表單欄位
- ATM 轉帳顯示轉帳資訊與注意事項
- 欄位長度限制與格式提示
- 更符合實際使用情境

## 📊 技術更新

### 新增型別定義
```typescript
export type TripType = 'roundtrip' | 'oneway' | 'multicity';

export interface MultiCityLeg {
  departure: string;
  destination: string;
  date: string;
}
```

### 更新的檔案
- `src/types/Flight.ts` - 新增行程類型
- `src/components/SearchForm.tsx` - 多程表單
- `src/pages/HomePage.tsx` - 多程選擇流程
- `src/pages/OrderHistoryPage.tsx` - 刪除功能
- `src/pages/PaymentPage.tsx` - 動態表單
- `src/App.tsx` - 訂單刪除處理

## ⚠️ 注意事項

1. **多程航班選擇**
   - 必須按順序選擇，不能跳過
   - 每程的出發地和目的地不能相同
   - 後面行程的日期必須晚於或等於前面行程

2. **訂單刪除**
   - 刪除後無法復原
   - 旅行地圖上的記錄會一併移除
   - 建議確認後再刪除

3. **付款資訊**
   - 不同付款方式的欄位不同
   - ATM 轉帳需在 24 小時內完成
   - 所有付款功能為模擬用途

## 🚀 版本資訊

- **版本號**: v2.1.0
- **更新日期**: 2025/10/10
- **狀態**: ✅ 已完成並測試通過

## 📝 未來計畫

- [ ] 訂單編輯功能
- [ ] 更多付款方式（電子錢包、國際信用卡等）
- [ ] 航班價格比較
- [ ] 自動推薦轉機路線

