# 星程航空訂票系統 - 功能說明

## 🎯 系統架構

本系統採用 **React + TypeScript** 開發，包含五個主要頁面：

1. **首頁（搜尋頁）** - `/`
2. **購物車頁面** - `/cart`  
3. **付款頁面** - `/payment`
4. **訂單記錄頁面** - `/orders`
5. **旅行地圖頁面** - `/map`

## 📱 頁面說明

### 1. 首頁 - 航班搜尋與選擇
**路徑**: `/`

**功能**:
- 選擇出發地（11個城市可選，與目的地互斥）
- 選擇目的地（11個城市可選，與出發地互斥）
- 選擇出發日期（必填）
- 選擇回程日期（選填，若填寫則為往返票）
- 選擇艙等（經濟艙/商務艙/頭等艙）
- 快速交換出發地與目的地（⇄ 按鈕）

**往返票流程**:
1. 搜尋航班後，顯示「選擇去程航班」
2. 選擇去程航班後，自動顯示「選擇回程航班」
3. 選擇回程航班後，兩張機票同時加入購物車

**單程票流程**:
1. 不填寫回程日期
2. 選擇航班後直接加入購物車

**特色**:
- 出發地和目的地不能相同（互斥選擇）
- 回程日期必須晚於或等於出發日期
- 出發/目的地按鈕大且醒目
- 即時顯示航班資訊
- 價格依艙等自動變化

---

### 2. 購物車頁面
**路徑**: `/cart`

**功能**:
- 顯示所有已選擇的航班
- 查看每個航班的詳細資訊：
  - 航班編號
  - 出發地 → 目的地
  - 出發/抵達時間
  - 飛行時間
  - 機型
  - 艙等
  - 價格
- 刪除不需要的航班
- 顯示航班總數量
- 顯示總金額
- 繼續選購（返回首頁）
- 前往付款

**特色**:
- 卡片式設計，清楚展示每個航班
- 即時計算總金額
- 購物車為空時顯示提示訊息

---

### 3. 付款頁面
**路徑**: `/payment`

**功能**:
- 選擇付款方式：
  - 💳 信用卡
  - 🏦 金融卡
  - 🏧 ATM 轉帳
- 輸入卡片資訊：
  - 持卡人姓名
  - 卡號
  - 有效期限
  - 安全碼（CVV）
- 查看訂單摘要（右側欄位）
- 顯示每個航班的價格
- 顯示總金額
- 確認付款按鈕
- 返回購物車按鈕

**付款流程**:
1. 選擇付款方式
2. 填寫卡片資訊
3. 點擊「確認付款」
4. 系統處理（模擬2秒）
5. 顯示付款成功訊息
6. 清空購物車
7. 返回首頁

**特色**:
- 付款時按鈕顯示「處理中...」
- 訂單摘要固定在右側（桌面版）
- 自動計算總金額
- 購物車為空時無法進入付款頁面

### 4. 訂單記錄頁面
**路徑**: `/orders`

**功能**:
- 顯示所有已完成的訂單
- 訂單資訊包含：
  - 訂單編號
  - 訂單日期與時間
  - 所有航班詳情
  - 付款方式
  - 總金額
- 訂單狀態顯示（已完成/已取消）

**特色**:
- 訂單自動儲存在瀏覽器（localStorage）
- 按時間排序，最新的在最上面
- 卡片式設計，清楚展示資訊
- 空狀態提示訊息

---

### 5. 旅行地圖頁面
**路徑**: `/map`

**功能**:
- 顯示世界地圖
- 標記所有訪問過的機場位置（🚩 旗子）
- 統計各洲去過的國家數量
- 顯示訪問過的機場列表

**統計資訊**:
- 總共訪問的機場數
- 各洲的國家數（亞洲、歐洲、美洲等）
- 每個國家/地區的名稱

**特色**:
- 互動式地圖
- 視覺化展示旅行足跡
- 自動從訂單記錄提取資料
- 美觀的統計卡片

---

## 🛒 導航列功能

位於頁面頂部，包含：

1. **Logo** - 點擊返回首頁
2. **搜尋航班** - 前往首頁
3. **購物車** - 前往購物車頁面
   - 顯示購物車數量徽章（紅色圓圈）
   - 有航班時才顯示數量
4. **訂單記錄** - 查看所有訂單
5. **旅行地圖** - 查看旅行足跡

---

## 📊 資料管理

### CSV 檔案
**位置**: `public/flights.csv`

**內容**: 20 筆航班資料（10 條航線的去回程）

**修改方式**:
1. 用文字編輯器或 Excel 開啟 `flights.csv`
2. 編輯或新增航班資料
3. 儲存檔案
4. 重新整理瀏覽器

**資料欄位**:
```csv
航班編號,出發地,目的地,出發時間,抵達時間,飛行時間,
經濟艙價格,商務艙價格,頭等艙價格,機型,剩餘座位
```

---

## 💡 使用範例

### 範例 1: 訂購單程票

1. 開啟首頁
2. 選擇「台北 TPE」→「東京 NRT」
3. 選擇出發日期和艙等（例如：經濟艙）
4. **不要選擇回程日期**
5. 點擊「搜尋航班」
6. 系統顯示「選擇去程航班」
7. 找到合適的航班，點擊「選擇」
8. 自動跳轉到購物車
9. 前往付款完成訂購

### 範例 2: 訂購往返票（推薦）

1. 開啟首頁
2. 選擇「台北 TPE」→「東京 NRT」
3. 選擇出發日期（例如：10/15）
4. **選擇回程日期**（例如：10/20）
5. 選擇艙等
6. 點擊「搜尋航班」
7. 系統顯示「選擇去程航班」
8. 選擇去程航班（例如：早上8:30的班機）
9. 系統自動切換到「選擇回程航班」
10. 選擇回程航班
11. 兩張機票自動加入購物車
12. 前往付款完成訂購

### 範例 3: 管理購物車

1. 在購物車頁面查看所有已選航班
2. 不要的航班點擊「刪除」按鈕
3. 總金額會自動更新
4. 可以點擊「繼續選購」新增更多航班
5. 滿意後點擊「前往付款」

---

## 🎨 UI 設計特色

### 色彩系統
- **深藍色** - 主色調，專業可信賴
- **金色** - 強調色，奢華感
- **深色背景** - 現代化風格

### 互動效果
- ✨ 卡片 hover 時有浮起效果
- ✨ 按鈕 hover 時有陰影增強
- ✨ 交換按鈕會旋轉 180 度
- ✨ 所有過渡都有平滑動畫

### 響應式設計
- 📱 手機：單欄布局
- 💻 電腦：多欄布局
- 🖥️ 大螢幕：最佳視覺體驗

---

## 🔧 技術細節

### 狀態管理
- 使用 React `useState` 管理：
  - 航班資料
  - 搜尋條件
  - 購物車內容
  - 載入狀態

### 路由設定
使用 React Router 管理頁面：
```typescript
<Route path="/" element={<HomePage />} />
<Route path="/cart" element={<CartPage />} />
<Route path="/payment" element={<PaymentPage />} />
```

### 資料流程
1. CSV 檔案 → PapaParse 解析 → React State
2. 使用者搜尋 → 篩選航班 → 更新顯示
3. 選擇航班 → 加入購物車 → 導航到購物車頁
4. 確認付款 → 模擬處理 → 清空購物車 → 返回首頁

---

## ✅ 核心功能清單

### 基本功能
- [x] 航班搜尋與篩選
- [x] 出發地/目的地互斥選擇
- [x] 往返日期選擇與驗證
- [x] 往返航班選擇流程
- [x] 多艙等價格顯示
- [x] 購物車管理（新增/刪除）
- [x] 購物車數量提示

### 付款功能
- [x] 多頁面路由
- [x] 付款頁面與表單
- [x] 多種付款方式
- [x] 模擬付款處理
- [x] 訂單摘要顯示
- [x] 總金額計算

### 進階功能
- [x] 訂單記錄頁面
- [x] 資料持久化（localStorage）
- [x] 旅行地圖視覺化
- [x] 機場標記與統計
- [x] 各洲國家數統計

### 技術功能
- [x] CSV 資料串接
- [x] 響應式設計
- [x] 現代化 UI/UX
- [x] TypeScript 型別安全

---

## 🚀 啟動專案

```bash
# 安裝依賴
npm install

# 開發模式
npm run dev

# 建置專案
npm run build

# 預覽建置結果
npm run preview
```

---

## 📝 注意事項

1. **付款為模擬功能** - 不會真的扣款，只是展示流程
2. **購物車儲存在記憶體** - 重新整理頁面會清空
3. **日期選擇僅限制最早日期** - 實際航班需要配合資料庫
4. **航班資料可隨時修改** - 編輯 CSV 即可

---

**版本**: v2.0.0  
**更新日期**: 2025/10/10  
**新增功能**: 
- 往返航班選擇流程
- 訂單記錄頁面
- 旅行地圖視覺化
- 出發地/目的地互斥選擇
- 資料持久化

**狀態**: ✅ 完整功能，可以使用

