# 星程航空訂票系統 ✈️

一個使用 React + TypeScript 開發的完整航空訂票網站，包含搜尋、**價格比較日曆**、選票、付款、訂單記錄和旅行地圖功能。

## 🚀 快速開始

```bash
# 1. 安裝依賴
npm install

# 2. 啟動開發伺服器
npm run dev

# 3. 開啟瀏覽器
http://localhost:5173
# 按 Cmd+Shift+R 強制重新載入
```

## ✨ 核心功能

### 📋 完整訂票流程
1. **行程選擇** - 來回票 / 單程票 / 多程票（最多4程）
2. **航班搜尋** - 選擇出發地、目的地、日期、艙等
3. **🆕 價格日曆** - 查看前後2天價格，**點擊日期立即切換航班**
4. **航班選擇** - 逐程選擇航班，加入購物車
5. **購物車管理** - 查看、刪除已選航班
6. **完成付款** - 多種付款方式，動態表單

### 🎯 特色功能

#### 📅 價格日曆（重點功能）
- **顯示前後2天價格**（共5天）
- **點擊日期切換航班** - 無需重新搜尋
- **往前/往後一天按鈕** - 快速導航
- **週末價格標示** - 紅色背景提醒
- **最低價顯示** - 找出該日最便宜航班
- **即時更新** - 點擊後航班列表立即更新

#### 其他功能
- 🗺️ **旅行地圖** - 視覺化展示去過的地方（深藍海洋+綠色陸塊）
- 📜 **訂單記錄** - 查看歷史訂單，可刪除
- 🔒 **資料持久化** - 自動儲存購物車和訂單
- 🚫 **智能驗證** - 出發地≠目的地，回程≥出發
- 💳 **動態表單** - 不同付款方式顯示不同欄位

## 🎨 設計特色

- 參考星宇航空的現代化設計
- 深藍色 + 金色配色
- 響應式設計，支援所有裝置
- 流暢的動畫與過渡效果

## 📊 技術棧

- **React 18** + **TypeScript** - 型別安全的 UI 框架
- **React Router** - 頁面路由
- **Vite** - 極速建置工具
- **PapaParse** - CSV 資料解析
- **LocalStorage** - 資料持久化

## 🎯 使用說明

### 價格日曆完整使用流程

1. **搜尋航班**
   ```
   來回票：台北 → 東京
   出發日期：2025/10/16
   回程日期：2025/10/20
   艙等：經濟艙
   ```

2. **看到價格日曆**
   ```
   [‹ 前一天]  [10/14]  [10/15]  [10/16]  [10/17]  [10/18]  [後一天 ›]
                 $9.8k    $10.2k   $8.5k✓   $8.7k    $9.0k
                 週六     週日     週一     週二     週三
   ```

3. **比較價格**
   - 發現 10/16（週一）$8.5k 最便宜
   - 或者想看其他日期

4. **點擊其他日期**
   - 點擊 10/17（週二）
   - 航班列表立即更新為 10/17 的航班
   - 價格日曆中 10/17 變成金色高亮 ✓

5. **使用導航按鈕**
   - 點擊「‹ 前一天」查看更早的日期
   - 點擊「後一天 ›」查看更晚的日期

6. **選擇航班**
   - 找到滿意的航班後點擊「選擇」
   - 加入購物車

### 其他行程類型

#### 單程票
```
選擇「單程」→ 台北 → 東京
→ 搜尋 → 看價格日曆 → 點擊日期切換 → 選航班
```

#### 來回票
```
選擇「來回」→ 填寫去回程日期
→ 搜尋 → 看去程價格日曆 → 選去程
→ 看回程價格日曆 → 選回程
```

#### 多程票（最多4程）
```
選擇「多程」→ 填寫各程
→ 搜尋 → 逐一選擇（無價格日曆）
```

## 💳 付款方式

### 信用卡 / 金融卡
- 持卡人姓名
- 卡號
- 有效期限
- 安全碼（CVV）
- 帳單地址

### ATM 轉帳
- 銀行代碼與帳號（自動顯示）
- 轉帳金額（自動計算）
- 轉帳後5碼
- 轉帳日期

## 📝 修改航班資料

編輯 `public/flights.csv`：

```csv
JX999,台北 TPE,巴黎 CDG,23:30,06:15+1,14h45m,45000,135000,250000,A350-900,350
```

## 🗺️ 支援航線

20筆航班，10條航線：
- 🇯🇵 日本、🇰🇷 韓國、🇹🇭 泰國、🇸🇬 新加坡
- 🇲🇾 馬來西亞、🇭🇰 香港、🇲🇴 澳門、🇮🇩 印尼

## 🛠️ 建置

```bash
npm run build    # 建置
npm run preview  # 預覽
```

## ❓ 常見問題

### Q: 價格日曆沒出現？
A: 確認選擇「來回」或「單程」（多程不顯示），並已搜尋航班。

### Q: 點擊日期後航班沒變？
A: 已修復！現在點擊日期會立即重新搜尋該日期的航班。

### Q: 價格怎麼計算的？
A: 從該航線找最低價，週末+15%，不同日期有波動。

### Q: 如何清除測試資料？
A: Console 執行 `localStorage.clear()` 然後重新整理。

---

**版本**: v2.3.0  
**最新功能**: 
- ✅ 價格日曆（點擊日期切換航班）
- ✅ 往前/往後一天導航
- ✅ 優化的付款表單
- ✅ 清晰的旅行地圖

**狀態**: ✅ 所有功能完成  
**開發伺服器**: 🟢 http://localhost:5173

**重要：請按 Cmd+Shift+R 強制重新載入頁面！**
