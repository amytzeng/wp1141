<!DOCTYPE html>
<html lang="zh-TW">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>系統測試頁</title>
    <style>
        body {
            font-family: Arial, sans-serif;
            max-width: 800px;
            margin: 50px auto;
            padding: 20px;
            background: #f5f5f5;
        }
        .container {
            background: white;
            padding: 30px;
            border-radius: 10px;
            box-shadow: 0 2px 10px rgba(0,0,0,0.1);
        }
        h1 { color: #333; }
        .status {
            padding: 10px;
            margin: 10px 0;
            border-radius: 5px;
            background: #e3f2fd;
        }
        .success { background: #c8e6c9; }
        .error { background: #ffcdd2; }
        button {
            padding: 10px 20px;
            margin: 5px;
            background: #2196f3;
            color: white;
            border: none;
            border-radius: 5px;
            cursor: pointer;
        }
        button:hover { background: #1976d2; }
        #result { margin-top: 20px; padding: 10px; background: #f5f5f5; }
    </style>
</head>
<body>
    <div class="container">
        <h1>🧪 My MapBook 系統測試</h1>
        
        <h2>當前狀態</h2>
        <div class="status">服務正在運行，但瀏覽器可能有安全限制。</div>

        <h2>解決方案</h2>
        
        <h3>方法 1: 直接訪問</h3>
        <button onclick="window.open('http://localhost:5173', '_blank')">🌐 打開 My MapBook 應用</button>
        <p>如果頁面空白，請按 Cmd+Shift+R (Mac) 或 Ctrl+Shift+R (Windows) 強制重新整理</p>

        <h3>方法 2: 檢查瀏覽器控制台</h3>
        <ol>
            <li>按 F12 打開開發者工具</li>
            <li>查看 Console 標籤</li>
            <li>複製所有紅色錯誤訊息</li>
        </ol>

        <h3>方法 3: 測試終端連接</h3>
        <button onclick="testTerminalConnection()">測試服務連接</button>
        <div id="terminal-result"></div>

        <div id="result"></div>
    </div>

    <script>
        function testTerminalConnection() {
            const result = document.getElementById('terminal-result');
            result.innerHTML = `
                <div class="status">
                    <strong>請在終端執行以下命令：</strong><br>
                    1. 測試後端: <code>curl http://localhost:3001/health</code><br>
                    2. 測試前端: <code>curl http://localhost:5173</code><br><br>
                    如果兩個命令都有響應，說明服務正常運行，問題在瀏覽器端。
                </div>
            `;
        }

        // 測試跨域請求（可能會失敗，但至少知道問題）
        async function testBackend() {
            try {
                const response = await fetch('http://localhost:3001/health', {
                    method: 'GET',
                    mode: 'cors'
                });
                const data = await response.json();
                console.log('Backend OK:', data);
            } catch (error) {
                console.error('Backend Error:', error);
            }
        }

        // 自動測試
        window.onload = () => {
            console.log('Test page loaded');
            testBackend();
        };
    </script>
</body>
</html>
