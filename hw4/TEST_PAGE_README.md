# 測試頁面使用說明

## 📋 檔案說明

`test-simple-react.html` 是一個獨立的測試工具頁面，用於快速診斷和測試地圖應用程式的運行狀態。

## 🎯 主要功能

測試頁面提供以下功能：

- ✅ **自動檢查後端服務** - 頁面載入時自動檢測後端服務狀態
- ✅ **手動測試 API** - 可手動觸發 API 連接測試
- ✅ **快速開啟前端應用** - 一鍵開啟主要應用程式
- ✅ **系統資訊顯示** - 顯示服務端口和檢查時間
- ✅ **錯誤診斷協助** - 提供詳細的錯誤信息和排查步驟

## ⚠️ 重要提示

### 為什麼測試項目顯示錯誤，但網頁可以正常運行？

如果您是**直接雙擊 HTML 檔案**或使用 `file://` 協議開啟測試頁面，測試功能可能無法正常工作。這是因為：

1. **瀏覽器安全限制**：從 `file://` 協議打開的 HTML 頁面無法向 `http://localhost` 發送請求
2. **CORS 限制**：瀏覽器會阻止從 `file://` 向 `http://` 的跨域請求

### 解決方法

**方法 1：忽略測試頁面的錯誤（推薦）**
- 測試頁面顯示錯誤不代表服務真的有問題
- 如果網頁可以正常運行，說明服務正常
- 直接使用應用程式即可

**方法 2：透過 HTTP 伺服器開啟測試頁面**
```bash
# 使用 Python 3
cd hw4
python3 -m http.server 8000

# 然後訪問
http://localhost:8000/test-simple-react.html
```

**方法 3：手動檢查後端狀態**
- 直接訪問：http://localhost:3001/health
- 如果看到 JSON 回應，代表後端正常運行

## 🚀 使用方式

### 方法 1：使用終端機開啟（推薦）

```bash
# 在項目根目錄執行
cd /Users/amy/Desktop/Uni/114\ Third\ Year/Web_Programming/wp1141
open hw4/test-simple-react.html
```

### 方法 2：直接在瀏覽器開啟

在瀏覽器中輸入以下地址：

```
file:///Users/amy/Desktop/Uni/114%20Third%20Year/Web_Programming/wp1141/hw4/test-simple-react.html
```

**或在 Finder 中**：找到 `hw4/test-simple-react.html` 檔案，直接雙擊開啟。

## 📝 使用步驟

### 步驟 1：啟動後端服務

在終端機執行：

```bash
cd hw4/backend
npm run dev
```

### 步驟 2：啟動前端服務

在新的終端機視窗執行：

```bash
cd hw4/frontend
npm run dev
```

### 步驟 3：開啟測試頁面

執行以下命令：

```bash
open hw4/test-simple-react.html
```

### 步驟 4：檢查服務狀態

測試頁面會自動檢查：
- ✅ 後端服務是否正常運行 (localhost:3001)
- ✅ API 連接是否正常

### 步驟 5：打開前端應用

點擊「打開應用」按鈕開啟主要應用程式。

## 🔍 頁面功能詳細說明

### 1. 檢查後端服務
- **自動檢查**：頁面載入時自動檢測後端服務
- **手動檢查**：點擊「重新檢查」按鈕手動測試
- **狀態顯示**：
  - ✅ 綠色：服務正常
  - ❌ 紅色：服務無法連接

### 2. 測試 API 連接
- 點擊「測試 API」按鈕測試 API 連接
- 顯示詳細的 API 響應信息

### 3. 打開前端應用
- **主要端口**：點擊第一個按鈕開啟 localhost:5173
- **備用端口**：點擊第二個按鈕開啟 localhost:5174（如果 5173 被占用）
- **強制重新整理**：如果前端頁面空白，按 `Cmd + Shift + R` (Mac) 或 `Ctrl + Shift + R` (Windows)

### 4. 檢查瀏覽器控制台
- 按 `F12` 打開開發者工具
- 查看 Console 標籤中的錯誤信息
- 複製錯誤訊息以便排查

### 5. 系統資訊
- 顯示當前使用的端口
- 顯示最後檢查時間

## 🔧 故障排除

### 問題 1：測試頁面無法載入
- **原因**：檔案路徑錯誤
- **解決**：確認檔案位置，使用絕對路徑

### 問題 2：後端服務無法連接
- **檢查清單**：
  1. ✅ 確認後端服務正在運行 (`cd hw4/backend && npm run dev`)
  2. ✅ 確認端口 3001 沒有被占用
  3. ✅ 查看終端機中的錯誤訊息
  4. ✅ 確認 `.env` 文件配置正確

### 問題 3：前端應用無法開啟
- **檢查清單**：
  1. ✅ 確認前端服務正在運行 (`cd hw4/frontend && npm run dev`)
  2. ✅ 確認端口 5173 或 5174 沒有被占用
  3. ✅ 嘗試強制重新整理頁面 (`Cmd + Shift + R`)
  4. ✅ 檢查瀏覽器控制台的錯誤訊息

### 問題 4：API 連接失敗
- **檢查清單**：
  1. ✅ 確認後端服務正在運行
  2. ✅ 確認 Google Maps API Key 配置正確
  3. ✅ 檢查 CORS 設定
  4. ✅ 查看後端終端機的錯誤訊息

## 💡 提示

1. **建議使用順序**：先啟動後端，再啟動前端，最後打開測試頁面
2. **強制重新整理**：如果遇到緩存問題，使用 `Cmd + Shift + R` 清除緩存
3. **同時使用**：可以保持測試頁面開啟，方便隨時檢查服務狀態
4. **錯誤記錄**：遇到錯誤時，截圖或複製控制台訊息

## 📊 預期結果

### 正常運行時

```
✅ 後端服務正常運行
✅ API 連接正常
✅ 前端應用可以正常開啟
✅ 控制台沒有錯誤訊息
```

### 問題發生時

```
❌ 後端服務無法連接
❌ API 連接失敗
⚠️ 前端頁面空白
⚠️ 控制台顯示錯誤訊息
```

## 📞 需要幫助？

如果遇到問題無法解決：

1. **收集信息**：
   - 截圖測試頁面狀態
   - 複製瀏覽器控制台錯誤
   - 查看終端機錯誤訊息

2. **檢查項目**：
   - README.md - 查看完整說明
   - TROUBLESHOOTING.md - 查看故障排除指南（如果有的話）

## 🔄 更新記錄

- **v1.0** (2025-01-XX) - 整合並優化測試頁面
  - 新增自動檢查功能
  - 優化使用者介面
  - 新增系統資訊顯示
  - 改善錯誤訊息提示
