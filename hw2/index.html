<!DOCTYPE html>
<html lang="zh-TW">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>塔防遊戲</title>
    <link rel="stylesheet" href="style.css">
</head>
<body>
    <!-- 開始頁面 -->
    <div id="start-screen" class="screen">
        <div class="start-content">
            <h1>🎮 塔防遊戲</h1>
            <p>建造塔防，防禦敵人入侵！</p>
            <button id="enter-game" class="start-btn">進入遊戲</button>
            <button id="game-guide" class="start-btn">遊戲說明</button>
            <button id="mute-btn" class="mute-btn">🔊</button>
        </div>
    </div>
    
    <!-- 遊戲說明頁面 -->
    <div id="guide-screen" class="screen" style="display: none;">
        <div class="guide-content">
            <h1>遊戲說明</h1>
            <button id="mute-btn-guide" class="mute-btn">🔊</button>
            <div class="guide-section">
                <h2>遊戲目標</h2>
                <p>在怪物抵達終點前將它們全部消滅！每隻怪物到達終點會損失一條生命，每關有5條生命。</p>
            </div>
            
            <div class="guide-section">
                <h2>介面介紹</h2>
                <div class="interface-guide">
                    <div class="guide-item">
                        <h3>遊戲資訊</h3>
                        <p>• 關卡：顯示當前關卡</p>
                        <p>• 生命：剩餘生命數（每關5條）</p>
                        <p>• 金幣：用於購買塔防</p>
                        <p>• 波次：當前波次/總波次</p>
                        <p>• 時間：波次倒數計時</p>
                        <p>• 分數：擊殺怪物和時間獎勵</p>
                    </div>
                    <div class="guide-item">
                        <h3>控制按鈕</h3>
                        <p>• 開始波次：開始敵人生成</p>
                        <p>• 暫停：暫停/繼續遊戲</p>
                        <p>• 快轉（1x）：2倍速度遊戲</p>
                    </div>
                </div>
            </div>
            
            <div class="guide-section">
                <h2>塔防系統</h2>
                <div class="tower-guide">
                    <div class="tower-info">
                        <h3>基礎塔 (20金幣) - 黃色</h3>
                        <p>• 傷害：20</p>
                        <p>• 射程：80</p>
                        <p>• 射速：1秒</p>
                        <p>• 平衡型塔防，適合新手</p>
                    </div>
                    <div class="tower-info">
                        <h3>快速塔 (40金幣) - 紫色</h3>
                        <p>• 傷害：10</p>
                        <p>• 射程：70</p>
                        <p>• 射速：0.3秒</p>
                        <p>• 高射速，適合清理小兵</p>
                    </div>
                    <div class="tower-info">
                        <h3>重型塔 (70金幣) - 紅色</h3>
                        <p>• 傷害：40</p>
                        <p>• 射程：120</p>
                        <p>• 射速：2秒</p>
                        <p>• 高傷害，適合對付坦克敵人</p>
                    </div>
                </div>
            </div>
            
            <div class="guide-section">
                <h2>造型系統</h2>
                <div class="tower-guide">
                    <div class="tower-info">
                        <h3>三角形造型</h3>
                        <p>• 大幅提升攻擊力</p>
                        <p>• 適合對付高血量敵人</p>
                        <p>• 基礎塔：+8攻擊力</p>
                        <p>• 快速塔：+5攻擊力</p>
                        <p>• 重型塔：+15攻擊力</p>
                    </div>
                    <div class="tower-info">
                        <h3>正方形造型</h3>
                        <p>• 大幅提升射程</p>
                        <p>• 覆蓋更大範圍</p>
                        <p>• 基礎塔：+15射程</p>
                        <p>• 快速塔：+12射程</p>
                        <p>• 重型塔：+25射程</p>
                    </div>
                    <div class="tower-info">
                        <h3>預設造型</h3>
                        <p>• 圓形外觀</p>
                        <p>• 標準屬性</p>
                        <p>• 免費使用</p>
                        <p>• 平衡的攻擊和射程</p>
                    </div>
                </div>
            </div>
            
            <div class="guide-section">
                <h2>怪物類型</h2>
                <div class="enemy-guide">
                    <div class="enemy-info">
                        <h3>紅色怪物 (基礎)</h3>
                        <p>• 生命：70</p>
                        <p>• 速度：中等</p>
                        <p>• 獎勵：1金幣</p>
                        <p>• 最常見的敵人</p>
                    </div>
                    <div class="enemy-info">
                        <h3>黃色怪物 (快速)</h3>
                        <p>• 生命：50</p>
                        <p>• 速度：快</p>
                        <p>• 獎勵：3金幣</p>
                        <p>• 移動速度快，血量較少</p>
                    </div>
                    <div class="enemy-info">
                        <h3>藍色怪物 (坦克)</h3>
                        <p>• 生命：300</p>
                        <p>• 速度：慢</p>
                        <p>• 獎勵：5金幣</p>
                        <p>• 高血量，需要重火力</p>
                    </div>
                    <div class="enemy-info">
                        <h3>Boss怪物</h3>
                        <p>• 生命：1000-10000</p>
                        <p>• 速度：極慢</p>
                        <p>• 獎勵：10-50金幣</p>
                        <p>• 特殊外觀，極高血量</p>
                    </div>
                </div>
            </div>
            
            <div class="guide-section">
                <h2>分數與金幣系統</h2>
                <div class="tower-guide">
                    <div class="tower-info">
                        <h3>擊殺獎勵</h3>
                        <p>• 紅色怪物：1金幣，10分</p>
                        <p>• 黃色怪物：3金幣，30分</p>
                        <p>• 藍色怪物：5金幣，50分</p>
                        <p>• Boss怪物：10-50金幣，100-500分</p>
                    </div>
                    <div class="tower-info">
                        <h3>波次完成</h3>
                        <p>• 每波次：20金幣</p>
                        <p>• 時間獎勵：剩餘秒數×1金幣</p>
                        <p>• 第5波次無時間限制</p>
                        <p>• 完成關卡獲得商店金幣</p>
                    </div>
                    <div class="tower-info">
                        <h3>商店系統</h3>
                        <p>• 商店金幣：關卡分數÷100</p>
                        <p>• 購買造型：50-100金幣</p>
                        <p>• 造型永久擁有</p>
                        <p>• 提供屬性加成</p>
                    </div>
                </div>
            </div>
            
            <div class="guide-section">
                <h2>操作說明</h2>
                <p>1. 點擊右側塔防選擇要建造的塔防類型</p>
                <p>2. 在草地上點擊放置塔防</p>
                <p>3. 點擊"開始波次"開始敵人生成</p>
                <p>4. 使用快轉功能加速遊戲</p>
                <p>5. 在商店購買和裝備塔防造型</p>
            </div>
            
            <button id="back-to-start-from-guide" class="back-btn">返回主選單</button>
        </div>
    </div>

    <div id="game-container" class="screen" style="display: none;">
        <button id="mute-btn-game" class="mute-btn">🔊</button>
        <div id="game-header">
            <div id="level-info">
                <span>關卡: <span id="current-level">1</span>/10</span>
            </div>
            <div id="lives-info">
                <span>生命: <span id="lives">5</span></span>
            </div>
            <div id="coins-info">
                <span>金幣: <span id="coins">100</span></span>
            </div>
            <div id="wave-info">
                <span>波次: <span id="current-wave">0</span>/<span id="total-waves">5</span></span>
            </div>
            <div id="timer-info">
                <span>時間: <span id="timer">0</span>s</span>
            </div>
            <div id="score-info">
                <span>分數: <span id="score">0</span></span>
            </div>
        </div>
        
        <div id="game-board">
            <canvas id="game-canvas" width="700" height="400"></canvas>
        </div>
        
        <div id="tower-panel">
            <h3>建造塔防</h3>
            <div class="tower-options">
                <div class="tower-option" data-tower="basic">
                    <div class="tower-icon basic-tower"></div>
                    <div class="tower-info">
                        <div class="tower-name">基礎塔</div>
                        <div class="tower-cost">20 金幣</div>
                    </div>
                </div>
                <div class="tower-option" data-tower="rapid">
                    <div class="tower-icon rapid-tower"></div>
                    <div class="tower-info">
                        <div class="tower-name">快速塔</div>
                        <div class="tower-cost">40 金幣</div>
                    </div>
                </div>
                <div class="tower-option" data-tower="heavy">
                    <div class="tower-icon heavy-tower"></div>
                    <div class="tower-info">
                        <div class="tower-name">重型塔</div>
                        <div class="tower-cost">70 金幣</div>
                    </div>
                </div>
            </div>
        </div>
        
        <div id="game-controls">
            <button id="start-wave">開始波次</button>
            <button id="pause-game">暫停</button>
            <button id="fast-forward">1x</button>
            <button id="shovel-btn" class="shovel-btn">🔨 鏟子</button>
            <button id="next-level" style="display: none;">下一關</button>
        </div>
    </div>
    
    <!-- 暫停彈窗 -->
    <div id="pause-modal" class="modal" style="display: none;">
        <div class="modal-content">
            <h2>遊戲暫停</h2>
            <p>選擇你的操作</p>
            <div class="pause-buttons">
                <button id="resume-game">繼續遊戲</button>
                <button id="restart-from-pause">重新開始</button>
                <button id="back-to-menu">回主選單</button>
            </div>
        </div>
    </div>

    <!-- 關卡結果彈窗 -->
    <div id="level-result-modal" class="modal" style="display: none;">
        <div class="modal-content">
            <h2 id="level-result-title">關卡完成</h2>
            <div id="level-result-stats">
                <p>分數: <span id="result-score">0</span></p>
                <p>獲得金幣: <span id="result-coins">0</span></p>
            </div>
            <div id="level-result-buttons">
                <button id="result-next-level" style="display: none;">下一關</button>
                <button id="result-restart">重新開始</button>
                <button id="result-shop" style="display: none;">商店</button>
                <button id="result-main-menu">回主選單</button>
            </div>
        </div>
    </div>

    <div id="game-over-modal" class="modal" style="display: none;">
        <div class="modal-content">
            <h2 id="game-over-title">遊戲結束</h2>
            <p id="game-over-message"></p>
            <button id="restart-game">重新開始</button>
            <button id="next-level-btn">下一關</button>
        </div>
    </div>

    <!-- Survival 結果彈窗 -->
    <div id="survival-result-modal" class="modal" style="display: none;">
        <div class="modal-content">
            <h2 id="survival-result-title">闖關結束！</h2>
            <div id="survival-result-stats">
                <p>總波次: <span id="survival-wave-count">0</span></p>
                <p>獲得分數: <span id="survival-result-score">0</span></p>
                <p>獲得金幣: <span id="survival-result-coins">0</span></p>
            </div>
            <div id="survival-result-buttons">
                <button id="survival-restart">重新挑戰</button>
                <button id="survival-main-menu">回主選單</button>
            </div>
        </div>
    </div>

    <!-- 塔防升級對話框 -->
    <div id="tower-upgrade-modal" class="tower-upgrade-modal" style="display: none;">
        <div class="tower-upgrade-content">
            <h3 id="upgrade-title">升級塔防</h3>
            <p id="upgrade-cost">費用: <span id="upgrade-cost-amount">0</span> 金幣</p>
            <div id="upgrade-options">
                <button id="upgrade-damage" class="upgrade-btn">攻擊力 +5</button>
                <button id="upgrade-speed" class="upgrade-btn">攻擊速度 +5</button>
            </div>
            <button id="upgrade-cancel" class="upgrade-cancel-btn">取消</button>
        </div>
    </div>
    

    <!-- 關卡選擇頁面 -->
    <div id="level-select-screen" class="screen" style="display: none;">
        <div class="level-select-content">
            <div class="level-select-header">
                <h2>選擇關卡</h2>
                <div class="shop-currency">
                    <span>商店金幣: <span id="shop-coins">0</span></span>
                </div>
                <button id="mute-btn-level" class="mute-btn">🔊</button>
            </div>
            <div class="level-select-tabs">
                <button class="level-tab active" data-tab="levels">關卡選擇</button>
                <button class="level-tab" data-tab="shop">商店</button>
            </div>
            
            <div id="levels-tab" class="tab-content active">
                <div class="level-buttons">
                    <button class="level-btn unlocked" data-level="1">
                        <div class="level-info">
                            <div class="level-number">關卡 1</div>
                            <div class="level-status">大坡池</div>
                        </div>
                    </button>
                    <button class="level-btn locked" data-level="2">
                        <div class="level-info">
                            <div class="level-number">關卡 2</div>
                            <div class="level-status">植物園</div>
                        </div>
                    </button>
                    <button class="level-btn locked" data-level="3">
                        <div class="level-info">
                            <div class="level-number">關卡 3</div>
                            <div class="level-status">華盛頓大學</div>
                        </div>
                    </button>
                    <button class="level-btn locked" data-level="4">
                        <div class="level-info">
                            <div class="level-number">關卡 4</div>
                            <div class="level-status">頤和園</div>
                        </div>
                    </button>
                    <button class="level-btn locked" data-level="5">
                        <div class="level-info">
                            <div class="level-number">關卡 5</div>
                            <div class="level-status">長城</div>
                        </div>
                    </button>
                    <button class="level-btn locked" data-level="6">
                        <div class="level-info">
                            <div class="level-number">關卡 6</div>
                            <div class="level-status">小琉球</div>
                        </div>
                    </button>
                    <button class="level-btn locked" data-level="7">
                        <div class="level-info">
                            <div class="level-number">關卡 7</div>
                            <div class="level-status">溪頭</div>
                        </div>
                    </button>
                    <button class="level-btn locked" data-level="8">
                        <div class="level-info">
                            <div class="level-number">關卡 8</div>
                            <div class="level-status">阿里山</div>
                        </div>
                    </button>
                    <button class="level-btn locked" data-level="9">
                        <div class="level-info">
                            <div class="level-number">關卡 9</div>
                            <div class="level-status">Wreck Beach</div>
                        </div>
                    </button>
                    <button class="level-btn locked" data-level="10">
                        <div class="level-info">
                            <div class="level-number">關卡 10</div>
                            <div class="level-status">Victoria</div>
                        </div>
                    </button>
                    <button class="level-btn locked" data-level="11">
                        <div class="level-info">
                            <div class="level-number">關卡 11</div>
                            <div class="level-status">Survival</div>
                        </div>
                    </button>
                </div>
            </div>
            
            <div id="shop-tab" class="tab-content">
                <div class="shop-tabs">
                    <button class="shop-tab active" data-tower="basic">基礎塔</button>
                    <button class="shop-tab" data-tower="rapid">快速塔</button>
                    <button class="shop-tab" data-tower="heavy">重型塔</button>
                </div>
                <div class="shop-items" id="shop-items">
                    <!-- 商店物品將由JavaScript動態生成 -->
                </div>
            </div>
            
            <button id="back-to-start" class="back-btn">回首頁</button>
        </div>
    </div>
    
    <script src="game.js"></script>
</body>
</html>
